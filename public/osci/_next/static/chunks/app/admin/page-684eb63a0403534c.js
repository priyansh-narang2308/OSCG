(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{18816:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>es});var a=t(95155),i=t(12115),r=t(88482),n=t(97168),l=t(89852),c=t(99474),o=t(88145),d=t(17580),m=t(29621),x=t(38564),u=t(6740),h=t(84616),p=t(8804),g=t(13717),j=t(62525),b=t(91788),f=t(47924),v=t(55670),N=t(92657),w=t(28113),y=t(75525),z=t(42355),k=t(13052),F=t(12108),A=t(35695),S=t(53580),C=t(99840),E=t(51154),P=t(4516),T=t(59099),O=t(18175),L=t(72894),U=t(34869);function _(e){let{userId:s,isOpen:t,onClose:l}=e,[c,d]=(0,i.useState)(null),[m,x]=(0,i.useState)(!1),[u,h]=(0,i.useState)(null);(0,i.useEffect)(()=>{t&&s?p(s):(d(null),h(null))},[t,s]);let p=async e=>{x(!0),h(null);try{let s=await fetch("/api/admin/users/".concat(e,"/details"));if(!s.ok)throw Error("Failed to fetch user details");let t=await s.json();d(t)}catch(e){console.error("Error fetching user details:",e),h("Failed to load user details. Please try again.")}finally{x(!1)}};return(0,a.jsx)(C.lG,{open:t,onOpenChange:e=>!e&&l(),children:(0,a.jsx)(C.Cf,{className:"bg-zinc-800 border-zinc-700 text-white max-w-3xl max-h-[90vh] overflow-y-auto no-scrollbar",children:m?(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)(E.A,{className:"w-8 h-8 animate-spin text-[#FF9933]"})}):u?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-red-400 mb-4",children:u}),(0,a.jsx)(n.$,{onClick:()=>s&&p(s),className:"btn-primary",children:"Retry"})]}):c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.c7,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("img",{src:c.image||"/placeholder.svg",alt:c.name,className:"w-16 h-16 rounded-full"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C.L3,{className:"text-2xl",children:c.name}),(0,a.jsx)(C.rr,{className:"text-zinc-400",children:c.email})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsx)(r.Zp,{className:"bg-zinc-700 border-zinc-600",children:(0,a.jsxs)(r.Wu,{className:"p-4 flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-[#FF9933]",children:c.totalScore}),(0,a.jsx)("p",{className:"text-sm text-zinc-300",children:"Total Score"})]})}),(0,a.jsx)(r.Zp,{className:"bg-zinc-700 border-zinc-600",children:(0,a.jsxs)(r.Wu,{className:"p-4 flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-[#FF9933]",children:c.contributions.length}),(0,a.jsx)("p",{className:"text-sm text-zinc-300",children:"Contributions"})]})}),(0,a.jsx)(r.Zp,{className:"bg-zinc-700 border-zinc-600",children:(0,a.jsx)(r.Wu,{className:"p-4 flex flex-col items-center justify-center",children:c.isAdmin?(0,a.jsx)(o.E,{className:"bg-[#FF9933] text-white",children:"Admin"}):(0,a.jsx)(o.E,{className:"bg-zinc-600 text-white",children:"User"})})})]}),c.bio&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Bio"}),(0,a.jsx)("p",{className:"text-zinc-300",children:c.bio})]}),c.location&&(0,a.jsxs)("div",{className:"flex items-center mb-6",children:[(0,a.jsx)(P.A,{className:"w-5 h-5 text-[#FF9933] mr-2"}),(0,a.jsx)("span",{className:"text-zinc-300",children:c.location})]}),c.skills&&c.skills.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Skills"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:c.skills.map(e=>(0,a.jsx)(o.E,{className:"bg-[#FF9933]/20 text-[#FF9933]",children:e},e))})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Social Links"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.githubUsername&&(0,a.jsx)(n.$,{asChild:!0,variant:"outline",className:"border-zinc-600 text-zinc-300 hover:bg-zinc-700 justify-start",children:(0,a.jsxs)("a",{href:"https://github.com/".concat(c.githubUsername),target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)(T.A,{className:"w-4 h-4 mr-2"}),c.githubUsername]})}),c.twitterUsername&&(0,a.jsx)(n.$,{asChild:!0,variant:"outline",className:"border-zinc-600 text-zinc-300 hover:bg-zinc-700 justify-start",children:(0,a.jsxs)("a",{href:"https://twitter.com/".concat(c.twitterUsername),target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)(O.A,{className:"w-4 h-4 mr-2"}),c.twitterUsername]})}),c.linkedinUsername&&(0,a.jsx)(n.$,{asChild:!0,variant:"outline",className:"border-zinc-600 text-zinc-300 hover:bg-zinc-700 justify-start",children:(0,a.jsxs)("a",{href:"https://linkedin.com/in/".concat(c.linkedinUsername),target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)(L.A,{className:"w-4 h-4 mr-2"}),c.linkedinUsername]})}),c.websiteUrl&&(0,a.jsx)(n.$,{asChild:!0,variant:"outline",className:"border-zinc-600 text-zinc-300 hover:bg-zinc-700 justify-start",children:(0,a.jsxs)("a",{href:c.websiteUrl,target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)(U.A,{className:"w-4 h-4 mr-2"}),"Website"]})})]})]}),c.contributions.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Recent Contributions"}),(0,a.jsx)("div",{className:"space-y-2",children:c.contributions.map(e=>(0,a.jsxs)("div",{className:"p-3 bg-zinc-700 rounded-lg border border-zinc-600 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-white",children:e.issueTitle}),(0,a.jsxs)("p",{className:"text-sm text-zinc-400",children:["Project: ",e.project.name]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.E,{className:"Beginner"===e.level?"bg-green-600/20 text-green-400 border-green-600/30":"Intermediate"===e.level?"bg-yellow-600/20 text-yellow-400 border-yellow-600/30":"bg-red-600/20 text-red-400 border-red-600/30",children:e.level}),(0,a.jsxs)("span",{className:"text-[#FF9933] font-bold",children:[e.score," pts"]})]})]},e.id))})]})]}):null})})}var $=t(84842),R=t(66474),M=t(5196),I=t(47863),D=t(53999);function G(e){let{...s}=e;return(0,a.jsx)($.bL,{"data-slot":"select",...s})}function Z(e){let{...s}=e;return(0,a.jsx)($.WT,{"data-slot":"select-value",...s})}function W(e){let{className:s,size:t="default",children:i,...r}=e;return(0,a.jsxs)($.l9,{"data-slot":"select-trigger","data-size":t,className:(0,D.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...r,children:[i,(0,a.jsx)($.In,{asChild:!0,children:(0,a.jsx)(R.A,{className:"size-4 opacity-50"})})]})}function H(e){let{className:s,children:t,position:i="popper",...r}=e;return(0,a.jsx)($.ZL,{children:(0,a.jsxs)($.UC,{"data-slot":"select-content",className:(0,D.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...r,children:[(0,a.jsx)(J,{}),(0,a.jsx)($.LM,{className:(0,D.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(B,{})]})})}function V(e){let{className:s,children:t,...i}=e;return(0,a.jsxs)($.q7,{"data-slot":"select-item",className:(0,D.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...i,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)($.VF,{children:(0,a.jsx)(M.A,{className:"size-4"})})}),(0,a.jsx)($.p4,{children:t})]})}function J(e){let{className:s,...t}=e;return(0,a.jsx)($.PP,{"data-slot":"select-scroll-up-button",className:(0,D.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(I.A,{className:"size-4"})})}function B(e){let{className:s,...t}=e;return(0,a.jsx)($.wn,{"data-slot":"select-scroll-down-button",className:(0,D.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(R.A,{className:"size-4"})})}let q=[{value:"participant",label:"Participant",color:"bg-blue-600/20 text-blue-400"},{value:"projectAdmin",label:"Project Admin",color:"bg-purple-600/20 text-purple-400"},{value:"mentor",label:"Mentor",color:"bg-green-600/20 text-green-400"}];function X(e){let{user:s,isOpen:t,onClose:r,onRoleUpdated:l}=e,[c,d]=(0,i.useState)(""),[m,x]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1),{toast:p}=(0,S.dj)(),g=async()=>{if(s&&c){x(!0);try{let e=await fetch("/api/admin/users/".concat(s.id,"/assign-role"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:c})}),t=await e.json();e.ok?(p({title:"Role Updated!",description:"".concat(s.name," has been assigned the ").concat(c," role")}),l(),r(),d("")):p({title:"Error",description:t.error||"Failed to assign role",variant:"destructive"})}catch(e){console.error("Failed to assign role:",e),p({title:"Error",description:"Failed to assign role",variant:"destructive"})}finally{x(!1)}}},j=async()=>{if(s){h(!0);try{let e=await fetch("/api/admin/users/".concat(s.id,"/toggle-admin"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isAdmin:!s.isAdmin})}),t=await e.json();e.ok?(p({title:"Admin Status Updated!",description:"".concat(s.name," ").concat(s.isAdmin?"removed from":"granted"," admin privileges")}),l()):p({title:"Error",description:t.error||"Failed to update admin status",variant:"destructive"})}catch(e){console.error("Failed to toggle admin status:",e),p({title:"Error",description:"Failed to update admin status",variant:"destructive"})}finally{h(!1)}}};if(!s)return null;let b=q.find(e=>e.value===s.role);return(0,a.jsx)(C.lG,{open:t,onOpenChange:e=>!e&&r(),children:(0,a.jsxs)(C.Cf,{className:"bg-zinc-800 border-zinc-700 text-white",children:[(0,a.jsx)(C.c7,{children:(0,a.jsxs)(C.L3,{className:"flex items-center space-x-2",children:[(0,a.jsx)(v.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Manage User Permissions"})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("img",{src:s.image||"/placeholder.svg?height=48&width=48",alt:s.name,className:"w-12 h-12 rounded-full"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:s.name}),(0,a.jsx)("p",{className:"text-sm text-zinc-400",children:s.email}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)(o.E,{className:null==b?void 0:b.color,children:null==b?void 0:b.label}),s.isAdmin&&(0,a.jsx)(o.E,{className:"bg-[#FF9933] text-white text-xs",children:"Admin"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3 p-4 bg-zinc-700/50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-sm",children:"Role Assignment"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Select Role"}),(0,a.jsxs)(G,{value:c,onValueChange:d,children:[(0,a.jsx)(W,{className:"bg-zinc-700 border-zinc-600",children:(0,a.jsx)(Z,{placeholder:"Choose a role"})}),(0,a.jsx)(H,{className:"bg-zinc-700 border-zinc-600",children:q.map(e=>(0,a.jsx)(V,{value:e.value,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{children:e.label}),e.value===s.role&&(0,a.jsx)(o.E,{className:"bg-zinc-600 text-zinc-300 text-xs",children:"Current"})]})},e.value))})]})]}),(0,a.jsx)(n.$,{onClick:g,disabled:m||!c||c===s.role,className:"bg-purple-600 hover:bg-purple-700 w-full",children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Assigning Role..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Assign Role"]})})]}),(0,a.jsxs)("div",{className:"space-y-3 p-4 bg-zinc-700/50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-sm",children:"Admin Privileges"}),(0,a.jsx)("p",{className:"text-xs text-zinc-400",children:"Admin users can manage projects, users, and system settings"}),(0,a.jsx)(n.$,{onClick:j,disabled:u,className:s.isAdmin?"bg-red-600 hover:bg-red-700 w-full":"bg-green-600 hover:bg-green-700 w-full",children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.A,{className:"w-4 h-4 mr-2 animate-spin"}),s.isAdmin?"Removing Admin...":"Granting Admin..."]}):(0,a.jsx)(a.Fragment,{children:s.isAdmin?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.A,{className:"w-4 h-4 mr-2"}),"Remove Admin Privileges"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.A,{className:"w-4 h-4 mr-2"}),"Grant Admin Privileges"]})})})]}),(0,a.jsx)("div",{className:"flex space-x-2",children:(0,a.jsx)(n.$,{onClick:r,variant:"outline",className:"border-zinc-600 flex-1",children:"Close"})})]})]})})}var Y=t(76981);function Q(e){let{className:s,...t}=e;return(0,a.jsx)(Y.bL,{"data-slot":"checkbox",className:(0,D.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:(0,a.jsx)(Y.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,a.jsx)(M.A,{className:"size-3.5"})})})}var K=t(381);function ee(e){let{project:s,isOpen:t,onClose:r,onAssignmentUpdated:l}=e,[c,m]=(0,i.useState)([]),[x,u]=(0,i.useState)([]),[h,p]=(0,i.useState)(""),[g,j]=(0,i.useState)([]),[b,f]=(0,i.useState)([]),[v,N]=(0,i.useState)(!1),[w,y]=(0,i.useState)(!1),{toast:z}=(0,S.dj)();(0,i.useEffect)(()=>{if(t&&s){var e;k(),F(),p((null==(e=s.owner)?void 0:e.id)||"")}},[t,s]);let k=async()=>{y(!0);try{let e=await fetch("/api/admin/users/?limit=10000&role=projectAdmin,mentor");if(e.ok){let{users:t}=await e.json();console.log("Fetched users:",t.length),console.log("Project owner:",null==s?void 0:s.owner),console.log("Total project admins:",t.filter(e=>"projectAdmin"===e.role).length),m(t.filter(e=>"projectAdmin"===e.role)),u(t.filter(e=>"mentor"===e.role))}}catch(e){console.error("Failed to fetch users:",e)}finally{y(!1)}},F=async()=>{if(s)try{let e=await fetch("/api/admin/projects/".concat(s.id,"/assign-mentors"));if(e.ok){let s=(await e.json()).map(e=>e.mentor);f(s),j(s.map(e=>e.id))}}catch(e){console.error("Failed to fetch current mentors:",e)}},A=async()=>{if(s){N(!0);try{let e=await fetch("/api/admin/projects/".concat(s.id,"/assign-owner"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ownerId:h||null})}),t=await e.json();e.ok?(z({title:"Owner Updated!",description:h?"Project owner has been assigned":"Project owner has been removed"}),l()):z({title:"Error",description:t.error||"Failed to assign owner",variant:"destructive"})}catch(e){console.error("Failed to assign owner:",e),z({title:"Error",description:"Failed to assign owner",variant:"destructive"})}finally{N(!1)}}},P=async()=>{if(s){N(!0);try{let e=await fetch("/api/admin/projects/".concat(s.id,"/assign-mentors"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mentorIds:g})}),t=await e.json();e.ok?(z({title:"Mentors Updated!",description:"".concat(g.length," mentors assigned to project")}),l()):z({title:"Error",description:t.error||"Failed to assign mentors",variant:"destructive"})}catch(e){console.error("Failed to assign mentors:",e),z({title:"Error",description:"Failed to assign mentors",variant:"destructive"})}finally{N(!1)}}},T=(e,s)=>{s?j([...g,e]):j(g.filter(s=>s!==e))};return s?(0,a.jsx)(C.lG,{open:t,onOpenChange:e=>!e&&r(),children:(0,a.jsxs)(C.Cf,{className:"bg-zinc-800 border-zinc-700 text-white max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(C.c7,{children:(0,a.jsxs)(C.L3,{className:"flex items-center space-x-2",children:[(0,a.jsx)(K.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Project Assignments"})]})}),w?(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)(E.A,{className:"w-8 h-8 animate-spin text-[#FF9933]"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:s.name}),(0,a.jsx)("p",{className:"text-sm text-zinc-400",children:s.description})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h4",{className:"font-medium flex items-center space-x-2",children:[(0,a.jsx)(K.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Project Owner"})]}),s.owner&&(0,a.jsxs)("div",{className:"p-3 bg-zinc-700 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-zinc-300",children:"Current Owner:"}),(0,a.jsx)("div",{className:"flex items-center space-x-2 mt-1",children:(0,a.jsx)(o.E,{className:"bg-purple-600/20 text-purple-400",children:s.owner.name})})]}),(0,a.jsxs)(G,{value:h,onValueChange:p,children:[(0,a.jsx)(W,{className:"bg-zinc-700 border-zinc-600",children:(0,a.jsx)(Z,{placeholder:"Select project admin"})}),(0,a.jsxs)(H,{className:"bg-zinc-700 border-zinc-600",children:[(0,a.jsx)(V,{value:"no-owner",children:"No Owner"}),c.map(e=>(0,a.jsxs)(V,{value:e.id,children:[e.name," (",e.email,")"]},e.id))]})]}),(0,a.jsx)(n.$,{onClick:A,disabled:v,className:"bg-[#FF9933] hover:bg-[#FF7518] w-full",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating Owner..."]}):"Update Owner"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h4",{className:"font-medium flex items-center space-x-2",children:[(0,a.jsx)(d.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["Mentors (",g.length," selected)"]})]}),(0,a.jsx)("div",{className:"max-h-48 overflow-y-auto space-y-2 border border-zinc-600 rounded-lg p-3",children:x.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(Q,{id:e.id,checked:g.includes(e.id),onCheckedChange:s=>T(e.id,s)}),(0,a.jsx)("label",{htmlFor:e.id,className:"flex-1 cursor-pointer",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:e.name}),(0,a.jsx)("span",{className:"text-sm text-zinc-400",children:e.email})]})})]},e.id))}),(0,a.jsx)(n.$,{onClick:P,disabled:v,className:"bg-green-600 hover:bg-green-700 w-full",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating Mentors..."]}):"Update Mentors"})]}),(0,a.jsx)("div",{className:"flex space-x-2",children:(0,a.jsx)(n.$,{onClick:r,variant:"outline",className:"border-zinc-600 flex-1",children:"Close"})})]})]})}):null}function es(){let{data:e,status:s}=(0,F.useSession)(),[t,C]=(0,i.useState)([]),[E,P]=(0,i.useState)([]),[T,O]=(0,i.useState)(!0),[L,U]=(0,i.useState)(!1),[$,R]=(0,i.useState)(null),[M,I]=(0,i.useState)(!1),[D,G]=(0,i.useState)(""),[Z,W]=(0,i.useState)(null),[H,V]=(0,i.useState)(!1),[J,B]=(0,i.useState)(null),[q,Y]=(0,i.useState)(!1),[Q,K]=(0,i.useState)(null),[es,et]=(0,i.useState)(!1),[ea,ei]=(0,i.useState)(!1),[er,en]=(0,i.useState)(!1),[el,ec]=(0,i.useState)(1),[eo,ed]=(0,i.useState)({page:1,limit:100,totalCount:0,totalPages:0,hasNext:!1,hasPrev:!1}),[em,ex]=(0,i.useState)({name:"",description:"",tags:"",githubLink:"",siteLink:"",nexFellowLink:""}),{toast:eu}=(0,S.dj)();(0,i.useEffect)(()=>{var t;"loading"!==s&&((null==e||null==(t=e.user)?void 0:t.isAdmin)||(0,A.redirect)("/"),eg())},[e,s]);let[eh,ep]=(0,i.useState)("");(0,i.useEffect)(()=>{let e=setTimeout(()=>{(0===D.length||D.length>=3)&&ep(D)},500);return()=>clearTimeout(e)},[D]),(0,i.useEffect)(()=>{ej()},[el,eh]);let eg=async()=>{try{let e=await fetch("/api/admin/projects");if(!e.ok)return void console.error("Failed to fetch projects:",await e.text());let s=await e.json();console.log("Fetched projects:",s),P(s)}catch(e){console.error("Failed to fetch data:",e)}finally{O(!1)}},ej=async()=>{try{let e=new URLSearchParams({page:el.toString(),limit:"100",search:D}),s=await fetch("/api/admin/users?".concat(e));if(!s.ok)return void console.error("Failed to fetch users:",await s.text());let t=await s.json();C(t.users),ed(t.pagination)}catch(e){console.error("Failed to fetch users:",e)}},eb=async()=>{ei(!0);try{let e=new URLSearchParams({export:"csv",search:D}),s=await fetch("/api/admin/users?".concat(e));if(!s.ok)throw Error("Failed to export data");let t=await s.json(),a=t.users.map(e=>[e.id,e.name,e.email,e.role,e.isAdmin,e.githubUsername,e.githubConnected,e.bio,e.location,e.skills,e.twitterUsername,e.linkedinUsername,e.websiteUrl,e.totalScore,e.contributionCount,e.ownedProjects,e.mentorProjects]),i=[["ID","Name","Email","Role","Is Admin","GitHub Username","GitHub Connected","Bio","Location","Skills","Twitter","LinkedIn","Website","Total Score","Contributions","Owned Projects","Mentor Projects"],...a].map(e=>e.map(e=>'"'.concat(e||"",'"')).join(",")).join("\n"),r=new Blob([i],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),l=URL.createObjectURL(r);n.setAttribute("href",l),n.setAttribute("download","osci-participants-".concat(new Date().toISOString().split("T")[0],".csv")),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),eu({title:"Export Successful!",description:"Exported ".concat(t.users.length," participants to CSV")})}catch(e){console.error("Failed to export CSV:",e),eu({title:"Export Failed",description:"Failed to export participant data",variant:"destructive"})}finally{ei(!1)}},ef=e=>{W(e),V(!0)},ev=async(e,s)=>{try{let t=await fetch("/api/admin/users/".concat(e,"/toggle-admin"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isAdmin:!s})}),a=await t.json();t.ok?(eu({title:"Success!",description:"User ".concat(s?"removed from":"promoted to"," admin")}),ej()):eu({title:"Error",description:a.error||"Failed to update admin status",variant:"destructive"})}catch(e){console.error("Failed to toggle admin status:",e),eu({title:"Error",description:"Failed to update admin status",variant:"destructive"})}},eN=async(e,s)=>{try{let t=await fetch("/api/admin/projects/".concat(e,"/toggle-featured"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isFeatured:!s})}),a=await t.json();t.ok?(eu({title:"Success!",description:"Project ".concat(s?"removed from":"added to"," featured")}),eg()):eu({title:"Error",description:a.error||"Failed to update featured status",variant:"destructive"})}catch(e){console.error("Failed to toggle featured status:",e),eu({title:"Error",description:"Failed to update featured status",variant:"destructive"})}},ew=async e=>{e.preventDefault();try{let e=$?"/api/admin/projects/".concat($.id):"/api/admin/projects",s=$?"PUT":"POST";(await fetch(e,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify({...em,tags:em.tags.split(",").map(e=>e.trim())})})).ok&&(ex({name:"",description:"",tags:"",githubLink:"",siteLink:"",nexFellowLink:""}),U(!1),R(null),eg(),eu({title:"Success!",description:"Project ".concat($?"updated":"created"," successfully")}))}catch(e){console.error("Failed to save project:",e),eu({title:"Error",description:"Failed to save project",variant:"destructive"})}},ey=async e=>{if(confirm("Are you sure you want to delete this project?"))try{(await fetch("/api/admin/projects/".concat(e),{method:"DELETE"})).ok&&(eg(),eu({title:"Success!",description:"Project deleted successfully"}))}catch(e){console.error("Failed to delete project:",e),eu({title:"Error",description:"Failed to delete project",variant:"destructive"})}},ez=async()=>{I(!0);try{let e=await fetch("/api/admin/calculate-scores",{method:"POST"});if(e.ok){let s=await e.json();eu({title:"Success!",description:s.message}),eg(),ej()}else{let s=await e.json();eu({title:"Error",description:s.error||"Failed to calculate scores",variant:"destructive"})}}catch(e){console.error("Failed to calculate scores:",e),eu({title:"Error",description:"Failed to calculate scores",variant:"destructive"})}finally{I(!1)}},ek=e=>{R(e),ex({name:e.name,description:e.description,tags:e.tags.join(", "),githubLink:e.githubLink,siteLink:e.siteLink||"",nexFellowLink:e.nexFellowLink||""}),U(!0)},eF=async()=>{en(!0);try{let e=await fetch("/api/admin/projects/refresh-stars",{method:"POST"});if(!e.ok){let s=await e.json();eu({title:"Error refreshing stars",description:s.error||"Failed to refresh GitHub stars",variant:"destructive"});return}let s=await e.json();eu({title:"GitHub Stars Refreshed",description:s.message}),await eg()}catch(e){eu({title:"Error refreshing stars",description:"An unexpected error occurred",variant:"destructive"}),console.error(e)}finally{en(!1)}},eA=E.filter(e=>e.isFeatured).length;if("loading"===s||T)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#FF9933] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-zinc-400",children:"Loading admin dashboard..."})]})});let eS=e=>{B(e),Y(!0)},eC=e=>{K(e),et(!0)},eE=e=>{ec(e)};return(0,a.jsxs)("div",{className:"min-h-screen py-8 px-4 mt-20 sm:px-6 lg:px-8 font-lexend",children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"text-zinc-400",children:"Manage users, projects, and calculate scores"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(n.$,{onClick:eg,className:"btn-secondary",children:"Refresh Data"}),(0,a.jsx)(n.$,{onClick:eF,disabled:er,className:"btn-secondary",children:er?"Refreshing Stars...":"Refresh GitHub Stars"})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)(r.Zp,{className:"bg-zinc-800 border-zinc-700",children:(0,a.jsx)(r.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-[#FF9933] rounded-lg flex items-center justify-center mr-4",children:(0,a.jsx)(d.A,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:eo.totalCount}),(0,a.jsx)("p",{className:"text-zinc-400",children:"Total Users"})]})]})})}),(0,a.jsx)(r.Zp,{className:"bg-zinc-800 border-zinc-700",children:(0,a.jsx)(r.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-[#FF9933] rounded-lg flex items-center justify-center mr-4",children:(0,a.jsx)(m.A,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:E.length}),(0,a.jsx)("p",{className:"text-zinc-400",children:"Total Projects"})]})]})})}),(0,a.jsx)(r.Zp,{className:"bg-zinc-800 border-zinc-700",children:(0,a.jsx)(r.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-[#FF9933] rounded-lg flex items-center justify-center mr-4",children:(0,a.jsx)(x.A,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[eA,"/6"]}),(0,a.jsx)("p",{className:"text-zinc-400",children:"Featured Projects"})]})]})})}),(0,a.jsx)(r.Zp,{className:"bg-zinc-800 border-zinc-700",children:(0,a.jsx)(r.Wu,{className:"p-6",children:(0,a.jsxs)(n.$,{onClick:ez,disabled:M,className:"btn-primary w-full flex items-center space-x-2",children:[(0,a.jsx)(u.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:M?"Calculating...":"Calculate Scores"})]})})})]}),(0,a.jsxs)(r.Zp,{className:"bg-zinc-800 border-zinc-700 mb-8",children:[(0,a.jsx)(r.aR,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(r.ZB,{children:"Projects Management"}),(0,a.jsxs)(n.$,{onClick:()=>{U(!L),R(null),ex({name:"",description:"",tags:"",githubLink:"",siteLink:"",nexFellowLink:""})},className:"btn-primary flex items-center space-x-2",children:[(0,a.jsx)(h.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Add Project"})]})]})}),(0,a.jsxs)(r.Wu,{children:[L&&(0,a.jsxs)("form",{onSubmit:ew,className:"mb-6 p-4 bg-zinc-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsx)(l.p,{placeholder:"Project Name",value:em.name,onChange:e=>ex({...em,name:e.target.value}),required:!0,className:"bg-zinc-800 border-zinc-600"}),(0,a.jsx)(l.p,{placeholder:"GitHub Link",value:em.githubLink,onChange:e=>ex({...em,githubLink:e.target.value}),required:!0,className:"bg-zinc-800 border-zinc-600"})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsx)(l.p,{placeholder:"Tags (comma separated)",value:em.tags,onChange:e=>ex({...em,tags:e.target.value}),className:"bg-zinc-800 border-zinc-600"}),(0,a.jsx)(l.p,{placeholder:"Site Link (optional)",value:em.siteLink,onChange:e=>ex({...em,siteLink:e.target.value}),className:"bg-zinc-800 border-zinc-600"})]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(l.p,{placeholder:"NexFellow Link",value:em.nexFellowLink,onChange:e=>ex({...em,nexFellowLink:e.target.value}),className:"bg-zinc-800 border-zinc-600"})}),(0,a.jsx)(c.T,{placeholder:"Project Description",value:em.description,onChange:e=>ex({...em,description:e.target.value}),required:!0,className:"mb-4 bg-zinc-800 border-zinc-600"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(n.$,{type:"submit",className:"btn-primary",children:$?"Update Project":"Create Project"}),(0,a.jsx)(n.$,{type:"button",onClick:()=>{U(!1),R(null)},className:"btn-secondary",children:"Cancel"})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:E.map(e=>{let s=Array.isArray(e.contributions)?e.contributions.reduce((e,s)=>e+(s.score||0),0):0;return(0,a.jsxs)("div",{className:"p-4 bg-zinc-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("img",{src:e.ownerImage||"/placeholder.svg?height=32&width=32",alt:e.githubOwner,className:"w-8 h-8 rounded-full"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.name}),e.isFeatured&&(0,a.jsxs)(o.E,{className:"bg-yellow-600/20 text-yellow-400 border-yellow-600/30",children:[(0,a.jsx)(x.A,{className:"w-3 h-3 mr-1"}),"Featured"]}),e.owner&&(0,a.jsxs)(o.E,{className:"bg-purple-600/20 text-purple-400 border-purple-600/30",children:["Owner: ",e.owner.name]})]}),(0,a.jsxs)("p",{className:"text-sm text-zinc-400",children:["by ",e.githubOwner]}),e.mentors.length>0&&(0,a.jsxs)("p",{className:"text-xs text-zinc-500",children:["Mentors:"," ",e.mentors.map(e=>e.mentor.name).join(", ")]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(n.$,{onClick:()=>eC(e),size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",title:"Assign owner and mentors",children:(0,a.jsx)(d.A,{className:"w-4 h-4"})}),(0,a.jsx)(n.$,{onClick:()=>eN(e.id,e.isFeatured),size:"sm",className:e.isFeatured?"bg-yellow-600 hover:bg-yellow-700 text-white":"btn-secondary",disabled:!e.isFeatured&&eA>=6,title:!e.isFeatured&&eA>=6?"Maximum 6 projects can be featured":e.isFeatured?"Remove from featured":"Add to featured",children:e.isFeatured?(0,a.jsx)(p.A,{className:"w-4 h-4"}):(0,a.jsx)(x.A,{className:"w-4 h-4"})}),(0,a.jsx)(n.$,{onClick:()=>ek(e),size:"sm",className:"btn-secondary",children:(0,a.jsx)(g.A,{className:"w-4 h-4"})}),(0,a.jsx)(n.$,{onClick:()=>ey(e.id),size:"sm",className:"bg-red-600 hover:bg-red-700 text-white",children:(0,a.jsx)(j.A,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("p",{className:"text-zinc-300 mb-2",children:e.description}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:e.tags.map(e=>(0,a.jsx)(o.E,{variant:"secondary",className:"bg-[#FF9933]/20 text-[#FF9933]",children:e},e))}),e.nexFellowLink&&(0,a.jsxs)("div",{className:"text-xs text-zinc-500 mb-2",children:[(0,a.jsx)("span",{className:"text-purple-400",children:"NexFellow:"})," ",e.nexFellowLink]}),(0,a.jsxs)("div",{className:"text-xs text-zinc-500",children:[e._count.contributions," contributions â€¢"," ",s," scores"]})]},e.id)})})]})]}),(0,a.jsxs)(r.Zp,{className:"bg-zinc-800 border-zinc-700",children:[(0,a.jsx)(r.aR,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(r.ZB,{children:"Users Overview"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(n.$,{onClick:eb,disabled:ea,className:"bg-green-600 hover:bg-green-700 text-white flex items-center space-x-2",children:ea?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Exporting..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Export CSV"})]})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-zinc-400 w-4 h-4"}),(0,a.jsx)(l.p,{placeholder:"Search users (min. 3 chars)...",value:D,onChange:e=>{G(e.target.value),(0===e.target.value.length||e.target.value.length>=3)&&ec(1)},className:"pl-10 bg-zinc-700 border-zinc-600 w-64"})]})]})]})}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsxs)("div",{className:"space-y-4",children:[t.map(s=>{var t,i;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-zinc-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("img",{src:s.image||"/placeholder.svg?height=40&width=40",alt:s.name,className:"w-10 h-10 rounded-full"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:s.name}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:s.email}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[s.isAdmin&&(0,a.jsx)(o.E,{className:"bg-[#FF9933] text-white text-xs",children:"Admin"}),(0,a.jsx)(o.E,{className:"participant"===s.role?"bg-blue-600/20 text-blue-400 border-blue-600/30":"projectAdmin"===s.role?"bg-purple-600/20 text-purple-400 border-purple-600/30":"bg-green-600/20 text-green-400 border-green-600/30",children:"participant"===s.role?"Participant":"projectAdmin"===s.role?"Project Admin":"Mentor"}),s.githubConnected&&(0,a.jsx)(o.E,{className:"bg-gray-600/20 text-gray-400 border-gray-600/30 text-xs",children:"GitHub"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-semibold",children:[s.totalScore||0," pts"]}),(0,a.jsxs)("p",{className:"text-sm text-zinc-400",children:[s.contributionCount||0," contributions"]}),s.ownedProjects.length>0&&(0,a.jsxs)("p",{className:"text-xs text-purple-400",children:["Owns:"," ",s.ownedProjects.map(e=>e.name).join(", ")]}),s.mentorProjects.length>0&&(0,a.jsxs)("p",{className:"text-xs text-green-400",children:["Mentors:"," ",s.mentorProjects.map(e=>e.project.name).join(", ")]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.$,{onClick:()=>eS(s),size:"sm",className:"bg-purple-600 hover:bg-purple-700 text-white",title:"Assign role",children:(0,a.jsx)(v.A,{className:"w-4 h-4"})}),(0,a.jsx)(n.$,{onClick:()=>ef(s.id),size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",title:"View user details",children:(0,a.jsx)(N.A,{className:"w-4 h-4"})}),(0,a.jsx)(n.$,{onClick:()=>ev(s.id,s.isAdmin),size:"sm",className:s.isAdmin?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white",disabled:(null==e||null==(t=e.user)?void 0:t.id)===s.id&&s.isAdmin,title:(null==e||null==(i=e.user)?void 0:i.id)===s.id&&s.isAdmin?"You cannot remove your own admin privileges":s.isAdmin?"Remove admin privileges":"Grant admin privileges",children:s.isAdmin?(0,a.jsx)(w.A,{className:"w-4 h-4"}):(0,a.jsx)(y.A,{className:"w-4 h-4"})})]})]})]},s.id)}),0===t.length&&D&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsxs)("p",{className:"text-zinc-400",children:['No users found matching "',D,'"']})})]}),eo.totalPages>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-zinc-700",children:[(0,a.jsxs)("div",{className:"text-sm text-zinc-400",children:["Showing ",(eo.page-1)*eo.limit+1," to"," ",Math.min(eo.page*eo.limit,eo.totalCount)," ","of ",eo.totalCount," users"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(n.$,{onClick:()=>eE(eo.page-1),disabled:!eo.hasPrev,size:"sm",className:"btn-secondary",children:[(0,a.jsx)(z.A,{className:"w-4 h-4"}),"Previous"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[Array.from({length:Math.min(5,eo.totalPages)},(e,s)=>{let t=s+1;return(0,a.jsx)(n.$,{onClick:()=>eE(t),size:"sm",className:t===eo.page?"bg-[#FF9933] hover:bg-[#FF7518] text-white":"btn-secondary",children:t},t)}),eo.totalPages>5&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"..."}),(0,a.jsx)(n.$,{onClick:()=>eE(eo.totalPages),size:"sm",className:eo.totalPages===eo.page?"bg-[#FF9933] hover:bg-[#FF7518] text-white":"btn-secondary",children:eo.totalPages})]})]}),(0,a.jsxs)(n.$,{onClick:()=>eE(eo.page+1),disabled:!eo.hasNext,size:"sm",className:"btn-secondary",children:["Next",(0,a.jsx)(k.A,{className:"w-4 h-4"})]})]})]})]})]})]}),(0,a.jsx)(_,{userId:Z,isOpen:H,onClose:()=>{V(!1),W(null)}}),(0,a.jsx)(X,{user:J,isOpen:q,onClose:()=>{Y(!1),B(null)},onRoleUpdated:ej}),(0,a.jsx)(ee,{project:Q,isOpen:es,onClose:()=>{et(!1),K(null)},onAssignmentUpdated:eg})]})}},44707:(e,s,t)=>{Promise.resolve().then(t.bind(t,18816))},53580:(e,s,t)=>{"use strict";t.d(s,{dj:()=>x});var a=t(12115);let i=0,r=new Map,n=e=>{if(r.has(e))return;let s=setTimeout(()=>{r.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,s)},l=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},c=[],o={toasts:[]};function d(e){o=l(o,e),c.forEach(e=>{e(o)})}function m(e){let{...s}=e,t=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function x(){let[e,s]=a.useState(o);return a.useEffect(()=>(c.push(s),()=>{let e=c.indexOf(s);e>-1&&c.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},53999:(e,s,t)=>{"use strict";t.d(s,{cn:()=>r});var a=t(52596),i=t(39688);function r(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,i.QP)((0,a.$)(s))}},88145:(e,s,t)=>{"use strict";t.d(s,{E:()=>c});var a=t(95155);t(12115);var i=t(99708),r=t(74466),n=t(53999);let l=(0,r.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:s,variant:t,asChild:r=!1,...c}=e,o=r?i.DX:"span";return(0,a.jsx)(o,{"data-slot":"badge",className:(0,n.cn)(l({variant:t}),s),...c})}},88482:(e,s,t)=>{"use strict";t.d(s,{Wu:()=>c,ZB:()=>l,Zp:()=>r,aR:()=>n});var a=t(95155);t(12115);var i=t(53999);function r(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,i.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function n(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,i.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function l(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,i.cn)("leading-none font-semibold",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,i.cn)("px-6",s),...t})}},89852:(e,s,t)=>{"use strict";t.d(s,{p:()=>r});var a=t(95155);t(12115);var i=t(53999);function r(e){let{className:s,type:t,...r}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,i.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...r})}},97168:(e,s,t)=>{"use strict";t.d(s,{$:()=>c});var a=t(95155);t(12115);var i=t(99708),r=t(74466),n=t(53999);let l=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:s,variant:t,size:r,asChild:c=!1,...o}=e,d=c?i.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,n.cn)(l({variant:t,size:r,className:s})),...o})}},99474:(e,s,t)=>{"use strict";t.d(s,{T:()=>r});var a=t(95155);t(12115);var i=t(53999);function r(e){let{className:s,...t}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,i.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}},99840:(e,s,t)=>{"use strict";t.d(s,{Cf:()=>d,L3:()=>x,c7:()=>m,lG:()=>l,rr:()=>u});var a=t(95155);t(12115);var i=t(15452),r=t(54416),n=t(53999);function l(e){let{...s}=e;return(0,a.jsx)(i.bL,{"data-slot":"dialog",...s})}function c(e){let{...s}=e;return(0,a.jsx)(i.ZL,{"data-slot":"dialog-portal",...s})}function o(e){let{className:s,...t}=e;return(0,a.jsx)(i.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function d(e){let{className:s,children:t,showCloseButton:l=!0,...d}=e;return(0,a.jsxs)(c,{"data-slot":"dialog-portal",children:[(0,a.jsx)(o,{}),(0,a.jsxs)(i.UC,{"data-slot":"dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...d,children:[t,l&&(0,a.jsxs)(i.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(r.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",s),...t})}function x(e){let{className:s,...t}=e;return(0,a.jsx)(i.hE,{"data-slot":"dialog-title",className:(0,n.cn)("text-lg leading-none font-semibold",s),...t})}function u(e){let{className:s,...t}=e;return(0,a.jsx)(i.VY,{"data-slot":"dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",s),...t})}}},e=>{var s=s=>e(e.s=s);e.O(0,[455,108,150,223,328,283,441,684,358],()=>s(44707)),_N_E=e.O()}]);